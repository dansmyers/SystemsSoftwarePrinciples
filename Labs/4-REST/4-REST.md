# REST

This lab will let you practice creating a RESTful HTTP interface using the Java Spring Boot framework.

## Overview

Navigate to your `SystemsSoftwarePrinciples` directory and perform a `git pull`. You should add this directory, `4-REST`, to the `Labs`
subdirectory.

Spring Boot is a framework for creating Rest-based web services where the server is written in Java.

- You write some Java classes, following a specific layout structure.

- These classes include annotations that associate methods in your code with particular HTTP URL endpoints.

- When a web browser navigates to one of these endpoints, the request is automatically routed to the appropriate Java method, which
executes its code. Methods can optionally return objects as responses.

Building a Spring Boot project requires using one of two tools: Maven or Gradle. We'll use Maven, because it's the first one that I got to work.

These build tools are hilariously complex and finicky. Just warning you.


## Get Java 8

You need to upgrade to Java 8 for Maven to work properly.

Open a file `/etc/apt/sources.list`:

```
$ sudo nano /etc/apt/sources.list
```

Paste in the following two lines:

```
deb http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main
deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main
```

Then save and exit the file (`CTRL + o`, `CTRL + x`).

Run the following commands at the prompt:

```
$ sudo apt-get update
$ sudo apt-get install oracle-java8-installer
```

Agree to install the packages, accept the license agreement, etc.

## Basic Classes

Navigate to `SystemsSoftwarePrinciples/Labs/4-REST` and take a look at the files in the directory. `mvnw` is the Maven application.

Open the file named `pom.xml`. **DO NOT EDIT THIS FILE**. This is the XML document that specifies the build rules for Maven to use. Think of it as a Makefile, with additional extra-special Java verbosity layered on top.

There should be a hierarchy of directories under `4-REST`, labeled `src/main/java/cms330`. Open the `Hello.java` file at the root of that directory. Maven expects the project files to rest at the base of a directory structure like this one.

Notice that it's been placed in `package cms330`, because it's located in the `cms330` direcotry.

Bulid the project:

```
$ ./mvnw clean package
```

This will download, like, 100 billion files. When it finishes, the application it built will be in the `target` directory as a `jar` archive.

```
$ java -jar target/cms330-rest-example-0.1.0.jar
```

This will print `Hello, World!` to the terminal.

## Take a REST

Create two new files: `Server.java` and `Controller.java` in the same directory as `Hello.java`.

Code for `Server.java`:

```
package cms330;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class Server {

    public static void main(String[] args) {
        SpringApplication.run(Server.class, args);
    }
}
```

Code for `Controller.java`:

```
package cms330;

import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import java.util.LinkedList;

@RestController
public class Controller {

    @RequestMapping("/hello")
    public String hello() {
        return "Hello, Friend!";
    }
}

```

Save both files and compile and run.

```
$ ./mvnw clean package
$ java -jar target/cms330-rest-example-0.1.0.jar
```

This time, running the `jar` file actually starts a web server.

Open a new tab in your browser and navigate to `https://cms330-YOURNAME.c9users.io`, where `YOURNAME` is your Cloud 9 user name.

You may see a message with an orange-ish screen pop up, telling you this is a test application. Click the button to proceed.

If everything worked, you should see the hello message printed in your browser window.

## Playground

Try playing with this framework. Add some new methods to `Controller` with different URL endpoints. For example, `/goodbye` endpoint, or a `/` endpoint for the root of the document.

